<mat-toolbar id="menu">
  <mat-toolbar-row id="loginMenu">
    <span class="marginLeft">
      <span *ngFor="let lang of translate.getLangs();let i = index" >
        <button  (click)="translate.use(lang)" class="langButton">{{lang}}</button>
        <span *ngIf="translate.langs.length > i+1" >|</span>
      </span>
    </span>

    <span class="spacer"></span>


    <mat-form-field appearance="outline" *ngIf="(LoginStatus$ | async) && selectedCompany">
      <mat-label>{{ 'MENU.SELECTED_COMPANY_LABEL' | translate }}</mat-label>
      <mat-select (selectionChange)="ChangeSelectCompany($event.value)" [(value)]="selectedCompany">
        <!--[compareWith]="displayCompanySelect"-->
        <mat-option *ngFor="let company of UserCompanys$ | async" [value]="company">
          {{company.name}}
        </mat-option>
      </mat-select>
      <span class="spacer"></span>
    </mat-form-field>


    <div *ngIf="(LoginStatus$ | async) as LoginStatus;else loginTo">
      <span *ngIf="(UserName$ | async) as UserName" class="marginRight logInLabel">{{UserName}}</span>
    </div>
    <ng-template #loginTo>
      <span  class="marginRight logInLabel">{{ 'MENU.LOGIN_TO_LABEL' | translate }}</span>
    </ng-template>


    <button mat-mini-fab [matMenuTriggerFor]="menuaccount" aria-label="account button" class="bgColorBlackNavyBlue">
      <mat-icon>account_circle</mat-icon>
    </button>
  </mat-toolbar-row>
    <mat-toolbar-row style="padding:0;">
      <section id="slider">
        <img src="/assets/images/tlo.jpg" [ngClass]="{'sliderMarginLeftUpTo3000': screenWidth < 3000}"  alt="Background"/>
        <img src="/assets/images/logo.png" [ngClass]="{'logoSliderMarginLeftto150': screenWidth < 420}" alt="Logo" />
      </section>

      <div id="mainMenu">
        <section class="marginRight" *ngIf="(screenWidth < 1000);else menu">
          <button mat-mini-fab [matMenuTriggerFor]="mobileMenu" aria-label="menu button" class="bgColorBlackNavyBlue">
            <mat-icon>menu</mat-icon>
          </button>
        </section>
      </div>

    </mat-toolbar-row>
    <mat-toolbar-row id="employeeMenu" style="padding:0;" *ngIf="(UserRole$ | async) === 'Administrator' || (UserRole$ | async) === 'Employee'">
      <a mat-menu-item *ngIf="(UserRole$ | async) === 'Administrator' || (UserRole$ | async) === 'Employee'" routerLink="/documents" class="button">
        <mat-icon>folder_shared</mat-icon>
        <span>{{ 'MENU.DOCUMENTS_LABEL' | translate }}</span>
      </a>
      <a mat-menu-item *ngIf="(UserRole$ | async) === 'Administrator' || (UserRole$ | async) === 'Employee'" routerLink="/letters" class="button">
        <mat-icon>mail_outline</mat-icon>
        <span>{{ 'MENU.LISTS_LABEL' | translate }}</span>
      </a>
      <a mat-menu-item *ngIf="(UserRole$ | async) === 'Administrator'" routerLink="/adminpanel" class="button">
        <mat-icon>assignment</mat-icon>
        <span>{{ 'MENU.ADMIN_PANEL_LABEL' | translate }}</span>
      </a>

    </mat-toolbar-row>
</mat-toolbar>




<ng-template #menu>
  <ng-container *ngTemplateOutlet="(LoginStatus$ | async) ? appMenu : firstPageMenu"></ng-container>
</ng-template>

<mat-menu #mobileMenu>
  <ng-container *ngTemplateOutlet="(LoginStatus$ | async) ? appMenu : firstPageMenu"></ng-container>
</mat-menu>


<ng-template #appMenu>
  <a mat-menu-item *ngIf="(LoginStatus$ | async) && ((CompanySelected$ | async)  | json) != '{}'" routerLink="/invoice" class="button">
    <mat-icon>receipt</mat-icon>
    <span>{{ 'MENU.INVOICE_LABEL' | translate }}</span>
  </a>
  <a mat-menu-item *ngIf="(LoginStatus$ | async) && ((CompanySelected$ | async) | json) != '{}'" routerLink="/payments" class="button">
    <mat-icon>payments</mat-icon>
    <span>{{ 'MENU.PAYMENTS_LABEL' | translate }}</span>
  </a>
  <a mat-menu-item *ngIf="(LoginStatus$ | async) && ((CompanySelected$ | async) | json) != '{}'" routerLink="/contractors" class="button">
    <mat-icon>hail</mat-icon>
    <span>{{ 'MENU.CONTRACTORS_LABEL' | translate }}</span>
  </a>
  <a mat-menu-item *ngIf="(LoginStatus$ | async) && (UserRole$ | async) !== 'Guest'" routerLink="/files" class="button">
    <mat-icon>folder</mat-icon>
    <span>{{ 'MENU.FILES_LABEL' | translate }}</span>
  </a>
  <a mat-menu-item *ngIf="LoginStatus$ | async" routerLink="/messages" class="button">
    <mat-icon>message</mat-icon>
    <span>{{ 'MENU.MESSAGES_LABEL' | translate }}</span>
  </a>
  <a mat-menu-item *ngIf="(UserRole$ | async) === 'Administrator' || (UserRole$ | async) === 'Employee' || (UserRole$ | async) === 'Client'" routerLink="/companies" class="button">
    <mat-icon>store</mat-icon>
    <span>{{ 'MENU.COMPANYS_LABEL' | translate }}</span>
  </a>
</ng-template>

<ng-template #firstPageMenu>
  <a mat-menu-item routerLink="/mainsubpage/4" class="button">
    <span>{{ 'MENU.SERVICES_LABEL' | translate }}</span>
  </a>
  <a mat-menu-item routerLink="/mainsubpage/5" class="button">
    <span>{{ 'MENU.NEWS_LABEL' | translate }}</span>
  </a>
  <a mat-menu-item routerLink="/mainsubpage/3" class="button">
    <span>{{ 'MENU.CLIENTS_LABEL' | translate }}</span>
  </a>
  <a mat-menu-item routerLink="/mainsubpage/6" class="button">
    <span>{{ 'MENU.STAFF_LABEL' | translate }}</span>
  </a>
  <a mat-menu-item routerLink="/mainsubpage/7" class="button">
    <span>{{ 'MENU.BRANCHES_LABEL' | translate }}</span>
  </a>
  <a mat-menu-item routerLink="/mainsubpage/8" class="button">
    <span>{{ 'MENU.SOFTWARE_LABEL' | translate }}</span>
  </a>
</ng-template>

<mat-menu #menuaccount>
  <a mat-menu-item *ngIf="(LoginStatus$ | async) as LoginStatus" routerLink="/user" class="button">
    <mat-icon>person</mat-icon>
    <span>{{ 'MENU.USER_PANEL_LABEL' | translate }}</span>
  </a>
  <div *ngIf="(LoginStatus$ | async) as LoginStatus">
    <a mat-menu-item *ngIf="LoginStatus" routerLink="/authentication/logout" class="button">
      <mat-icon>login</mat-icon>
      <span>{{ 'MENU.LOGOUT_LABEL' | translate }}</span>
    </a>
  </div>
  <div *ngIf="!(LoginStatus$ | async) as LoginStatus">
    <a mat-menu-item *ngIf="LoginStatus" routerLink="/authentication/login" class="button">
      <mat-icon>login</mat-icon>
      <span>{{ 'MENU.LOGIN_LABEL' | translate }}</span>
    </a>
    <a mat-menu-item *ngIf="!(LoginStatus$ | async)" routerLink="/authentication/register" class="button">
      <mat-icon>assignment_ind</mat-icon>
      <span>{{ 'MENU.REGISTRATION_LABEL' | translate }}</span>
    </a>
  </div>
</mat-menu>
