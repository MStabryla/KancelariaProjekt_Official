<mat-card>
  <h1 mat-dialog-title>
    {{data.description | translate}}
  </h1>
  <div mat-dialog-content>
    <form [formGroup]="returnForm">
      <div class="cardCell">
        <mat-form-field appearance="outline" *ngFor="let formPart of data.form; let i=index">
          <mat-label>{{formPart.description | translate}}</mat-label>

          <mat-select *ngIf="(formPart.value | typeof) == 'array';else normalField" formControlName="{{formPart.name}}" [(value)]="formPart.value[0]">
            <mat-option></mat-option>
            <div *ngFor="let selection of formPart.value[1] | keyvalue">
              <mat-option *ngIf="(selection.value | typeof) == 'number'" [value]="selection.value">{{selection.key}}</mat-option>
            </div>
          </mat-select>

          <ng-template #normalField>
            <input *ngIf="(formPart.value | typeof) != 'object' || formPart.value ==null;else customFormControl" [readonly]="formPart.regEx.disabled" matInput formControlName="{{formPart.name}}" required>
          </ng-template>
          <ng-template #customFormControl>

            <codeCoutry-input *ngIf="formPart.name == 'codeCoutry'" formControlName="{{formPart.name}}"></codeCoutry-input>
            <adress-input *ngIf="formPart.name == 'adress' " formControlName="{{formPart.name}}"></adress-input>

          </ng-template>
        </mat-form-field>
      </div>
    </form>
  </div>
  <div mat-dialog-actions>
    <button mat-button [mat-dialog-close]="returnForm.value" [disabled]="!returnForm.valid" cdkFocusInitial>{{data.ok | translate}}</button>
    <button mat-button [mat-dialog-close]="null" *ngIf="data.close != null" cdkFocusInitial>{{data.close | translate}}</button>
  </div>
</mat-card>
